import{r as g,a as _e}from"./vendor-uYDHyRUA.js";import{i as Ee,g as $e,a as Ie,q as F,o as V,c as q,b as Q,d as ee,s as Be,e as Le,f as Me,h as Ue,j as te,k as qe}from"./firebase-BVKPCswj.js";import{A as ye,R as ze,H as je,S as Y,U as K,L as Fe,P as X,F as le,D as Ve,T as Z,a as Oe,b as We,B as Ge,C as ve,W as we,c as J,d as oe,e as Ke,f as Ne,g as He,h as Ye,i as Ze,G as ke,M as Se,j as ae,X as ie,k as Xe,l as De,m as ne,I as de,n as Je}from"./ui-Qwr3VlNz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const j of c.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&s(j)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();var Ce={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=g,et=Symbol.for("react.element"),tt=Symbol.for("react.fragment"),rt=Object.prototype.hasOwnProperty,st=Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,at={key:!0,ref:!0,__self:!0,__source:!0};function Ae(r,t,a){var s,i={},c=null,j=null;a!==void 0&&(c=""+a),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(j=t.ref);for(s in t)rt.call(t,s)&&!at.hasOwnProperty(s)&&(i[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:et,type:r,key:c,ref:j,props:i,_owner:st.current}}re.Fragment=tt;re.jsx=Ae;re.jsxs=Ae;Ce.exports=re;var e=Ce.exports,Pe,ce=_e;Pe=ce.createRoot,ce.hydrateRoot;const nt={apiKey:"AIzaSyDLDqzEYnBd6_2pqMKzDqNzXCG9xXJaLHQ",authDomain:"kimrapor.firebaseapp.com",databaseURL:"https://kimrapor-default-rtdb.firebaseio.com",projectId:"kimrapor",storageBucket:"kimrapor.firebasestorage.app",messagingSenderId:"457066848242",appId:"1:457066848242:web:72f711ffd6c7ba5e3d156b"},Re=Ee(nt),L=$e(Re),W=Ie(Re),lt=async(r,t)=>{try{return{data:{user:(await Be(W,r,t)).user},error:null}}catch(a){return{data:null,error:{message:a.message}}}},it=async(r,t,a)=>{try{const i=(await Le(W,r,t)).user;return a&&i&&await Me(Ue(L,"users",i.uid),{name:a.name||r,email:r,role:a.role||"staff",department:a.department||"Genel",createdAt:new Date,updatedAt:new Date}),{data:{user:i},error:null}}catch(s){return{data:null,error:{message:s.message}}}},me=async()=>{try{const r=F(q(L,"platform_data"),V("enteredAt","desc"));return{data:(await ee(r)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(r){return{data:null,error:{message:r.message}}}},ot=async r=>{try{const t=W.currentUser;return{data:{id:(await te(q(L,"platform_data"),{platform:r.platform,metrics_followers:r.metrics.followers,metrics_engagement:r.metrics.engagement,metrics_reach:r.metrics.reach,metrics_impressions:r.metrics.impressions,metrics_clicks:r.metrics.clicks,metrics_conversions:r.metrics.conversions,month:r.month,year:r.year,entered_by:r.enteredBy,user_id:t?.uid||null,enteredAt:new Date})).id},error:null}}catch(t){return{data:null,error:{message:t.message}}}},ue=async()=>{try{const r=F(q(L,"website_data"),V("enteredAt","desc"));return{data:(await ee(r)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(r){return{data:null,error:{message:r.message}}}},dt=async r=>{try{const t=W.currentUser;return{data:{id:(await te(q(L,"website_data"),{visitors:r.visitors,page_views:r.pageViews,bounce_rate:r.bounceRate,avg_session_duration:r.avgSessionDuration,conversions:r.conversions,top_pages:r.topPages,month:r.month,year:r.year,entered_by:r.enteredBy,user_id:t?.uid||null,enteredAt:new Date})).id},error:null}}catch(t){return{data:null,error:{message:t.message}}}},xe=async()=>{try{const r=F(q(L,"news_data"),V("enteredAt","desc"));return{data:(await ee(r)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(r){return{data:null,error:{message:r.message}}}},ct=async r=>{try{const t=W.currentUser;return{data:{id:(await te(q(L,"news_data"),{mentions:r.mentions,sentiment:r.sentiment,reach:r.reach,top_sources:r.topSources,month:r.month,year:r.year,entered_by:r.enteredBy,user_id:t?.uid||null,enteredAt:new Date})).id},error:null}}catch(t){return{data:null,error:{message:t.message}}}},ge=async()=>{try{const r=F(q(L,"rpa_data"),V("enteredAt","desc"));return{data:(await ee(r)).docs.map(s=>({id:s.id,...s.data()})),error:null}}catch(r){return{data:null,error:{message:r.message}}}},mt=async r=>{try{const t=W.currentUser;return{data:{id:(await te(q(L,"rpa_data"),{total_incoming_mails:r.totalIncomingMails,total_distributed:r.totalDistributed,top_redirected_unit1:r.topRedirectedUnits.unit1,top_redirected_unit2:r.topRedirectedUnits.unit2,top_redirected_unit3:r.topRedirectedUnits.unit3,month:r.month,year:r.year,entered_by:r.enteredBy,user_id:t?.uid||null,enteredAt:new Date})).id},error:null}}catch(t){return{data:null,error:{message:t.message}}}},ut=r=>{const t=F(q(L,"platform_data"),V("enteredAt","desc"));return Q(t,a=>{a.docChanges().forEach(s=>{r({eventType:s.type,new:{id:s.doc.id,...s.doc.data()},old:s.type==="modified"?{id:s.doc.id,...s.doc.data()}:null})})})},xt=r=>{const t=F(q(L,"website_data"),V("enteredAt","desc"));return Q(t,a=>{a.docChanges().forEach(s=>{r({eventType:s.type,new:{id:s.doc.id,...s.doc.data()},old:s.type==="modified"?{id:s.doc.id,...s.doc.data()}:null})})})},gt=r=>{const t=F(q(L,"news_data"),V("enteredAt","desc"));return Q(t,a=>{a.docChanges().forEach(s=>{r({eventType:s.type,new:{id:s.doc.id,...s.doc.data()},old:s.type==="modified"?{id:s.doc.id,...s.doc.data()}:null})})})},bt=r=>{const t=F(q(L,"rpa_data"),V("enteredAt","desc"));return Q(t,a=>{a.docChanges().forEach(s=>{r({eventType:s.type,new:{id:s.doc.id,...s.doc.data()},old:s.type==="modified"?{id:s.doc.id,...s.doc.data()}:null})})})},be=r=>r.map(t=>({id:t.id,platform:t.platform,metrics:{followers:t.metrics_followers||0,engagement:t.metrics_engagement||0,reach:t.metrics_reach||0,impressions:t.metrics_impressions||0,clicks:t.metrics_clicks||0,conversions:t.metrics_conversions||0},month:t.month,year:t.year,enteredBy:t.entered_by,enteredAt:t.enteredAt?.toDate?t.enteredAt.toDate():new Date(t.enteredAt)})),pe=r=>r.map(t=>({id:t.id,visitors:t.visitors||0,pageViews:t.page_views||0,bounceRate:parseFloat(t.bounce_rate||"0"),avgSessionDuration:parseFloat(t.avg_session_duration||"0"),conversions:t.conversions||0,topPages:t.top_pages||[],month:t.month,year:t.year,enteredBy:t.entered_by,enteredAt:t.enteredAt?.toDate?t.enteredAt.toDate():new Date(t.enteredAt)})),he=r=>r.map(t=>({id:t.id,mentions:t.mentions||0,sentiment:t.sentiment,reach:t.reach||0,topSources:t.top_sources||[],month:t.month,year:t.year,enteredBy:t.entered_by,enteredAt:t.enteredAt?.toDate?t.enteredAt.toDate():new Date(t.enteredAt)})),fe=r=>r.map(t=>({id:t.id,totalIncomingMails:t.total_incoming_mails||0,totalDistributed:t.total_distributed||0,topRedirectedUnits:{unit1:t.top_redirected_unit1||"",unit2:t.top_redirected_unit2||"",unit3:t.top_redirected_unit3||""},month:t.month,year:t.year,enteredBy:t.entered_by,enteredAt:t.enteredAt?.toDate?t.enteredAt.toDate():new Date(t.enteredAt)})),Te=g.createContext(void 0),O=()=>{const r=g.useContext(Te);if(r===void 0)throw new Error("useApp must be used within an AppProvider");return r},pt=({children:r})=>{const[t,a]=g.useState(null),[s,i]=g.useState(null),[c,j]=g.useState([]),[u,v]=g.useState([]),[_,b]=g.useState([]),[o,p]=g.useState([]),[x,f]=g.useState("dashboard"),[w,C]=g.useState(!0),[P,$]=g.useState(new Date),[I,z]=g.useState(null);g.useEffect(()=>{const m=qe(W,h=>{i(h),h?a({id:h.uid,name:h.displayName||h.email||"User",email:h.email||"",role:"staff",department:"Genel"}):(a(null),j([]),v([]),b([]),p([]))});return()=>m()},[]),g.useEffect(()=>{(async()=>{try{const[h,N,E,A]=await Promise.all([me(),ue(),xe(),ge()]);if(h.error)throw h.error;if(N.error)throw N.error;if(E.error)throw E.error;if(A.error)throw A.error;j(be(h.data||[])),v(pe(N.data||[])),b(he(E.data||[])),p(fe(A.data||[])),$(new Date),C(!0),z(null)}catch(h){console.error("Initial data load error:",h),C(!1),z("Veri yüklenirken hata oluştu")}})()},[]),g.useEffect(()=>{const m=ut(A=>{console.log("Platform data changed:",A),me().then(k=>{k.data&&(j(be(k.data)),$(new Date))})}),h=xt(A=>{console.log("Website data changed:",A),ue().then(k=>{k.data&&(v(pe(k.data)),$(new Date))})}),N=gt(A=>{console.log("News data changed:",A),xe().then(k=>{k.data&&(b(he(k.data)),$(new Date))})}),E=bt(A=>{console.log("RPA data changed:",A),ge().then(k=>{k.data&&(p(fe(k.data)),$(new Date))})});return()=>{m(),h(),N(),E()}},[]);const l={user:t,setUser:a,platformData:c,websiteData:u,newsData:_,rpaData:o,addPlatformData:async m=>{const{error:h}=await ot(m);if(h)throw h},addWebsiteData:async m=>{const{error:h}=await dt(m);if(h)throw h},addNewsData:async m=>{const{error:h}=await ct(m);if(h)throw h},addRPAData:async m=>{const{error:h}=await mt(m);if(h)throw h},currentView:x,setCurrentView:f,isConnected:w,lastUpdate:P,error:I,firebaseUser:s};return e.jsx(Te.Provider,{value:l,children:r})};class ht extends g.Component{constructor(t){super(t),this.handleRefresh=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("Production Error Boundary caught an error:",t,a),this.setState({error:t,errorInfo:a})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Bir Hata Oluştu"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Uygulama beklenmeyen bir hatayla karşılaştı. Lütfen sayfayı yenileyin veya ana sayfaya dönün."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleRefresh,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Sayfayı Yenile"})]}),e.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{children:"Ana Sayfaya Dön"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Sorun devam ederse sistem yöneticisiyle iletişime geçin."})})]})}):this.props.children}}const ft="/assets/loog-BJIQTH_F.png",yt=()=>{const{user:r,setUser:t,currentView:a,setCurrentView:s}=O(),i=()=>{t(null),localStorage.removeItem("user")};if(!r)return null;const j=r.role==="admin"?[{key:"dashboard",label:"Admin Panel",icon:Y,description:"Tüm veriler ve analitik"},{key:"entry",label:"Veri Girişi",icon:X,description:"Yeni veri ekle"},{key:"reports",label:"Raporlar",icon:le,description:"Detaylı raporlar"}]:[{key:"dashboard",label:"Panelim",icon:je,description:"Kişisel dashboard"},{key:"entry",label:"Veri Girişi",icon:Ve,description:"Veri ekle ve güncelle"},{key:"reports",label:"Raporlarım",icon:Z,description:"Kendi raporlarım"}];return e.jsxs("nav",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:ft,alt:"Kurumsal İletişim Müdürlüğü Logo",className:"w-20 h-20 object-contain"})}),e.jsx("div",{className:"flex space-x-1",children:j.map(u=>{const v=u.icon,_=a===u.key;return e.jsxs("button",{onClick:()=>s(u.key),className:`group relative flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${_?r.role==="admin"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:u.label}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:[u.description,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]},u.key)})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`hidden sm:flex items-center space-x-2 px-3 py-1 rounded-full text-xs font-medium ${r.role==="admin"?"bg-purple-50 text-purple-700 border border-purple-200":"bg-green-50 text-green-700 border border-green-200"}`,children:r.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-3 h-3"}),e.jsx("span",{children:"Yönetici"})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-3 h-3"}),e.jsx("span",{children:"Personel"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold text-sm ${r.role==="admin"?"bg-gradient-to-br from-purple-600 to-pink-600":"bg-gradient-to-br from-green-600 to-blue-600"}`,children:r.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"hidden sm:block text-sm",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:r.department})]})]}),e.jsxs("button",{onClick:i,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors group relative",title:"Çıkış Yap",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:"Çıkış Yap"})]})]})]})]})}),e.jsx("div",{className:"sm:hidden px-4 pb-2",children:e.jsx("div",{className:"flex justify-center space-x-1",children:j.map(u=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${a===u.key?r.role==="admin"?"bg-purple-500":"bg-green-500":"bg-gray-300"}`},u.key))})})]})},jt=()=>{const{setUser:r}=O(),[t,a]=g.useState({email:"",password:"",name:"",role:"staff",department:""}),[s,i]=g.useState(!1),[c,j]=g.useState(null),[u,v]=g.useState(!1),_=async o=>{i(!0),j(null);try{const p={id:`demo-${o}-${Date.now()}`,name:o==="admin"?"Demo Admin":"Demo Personel",email:`demo-${o}@example.com`,role:o,department:o==="admin"?"Yönetim":"Pazarlama"};r(p),console.log(`${o} demo modu aktif`)}catch(p){console.error("Demo login error:",p),j(`Demo girişi başarısız: ${p.message}`)}finally{i(!1)}},b=async o=>{o.preventDefault(),i(!0),j(null);try{if(u){const{data:p,error:x}=await it(t.email,t.password,{name:t.name,role:t.role,department:t.department});if(x)throw x.message.includes("email-already-in-use")?new Error("Bu email adresi zaten kayıtlı. Giriş yapmayı deneyin."):x.message.includes("weak-password")?new Error("Şifre en az 6 karakter olmalı."):x.message.includes("invalid-email")?new Error("Geçerli bir email adresi girin."):new Error("Kayıt işlemi başarısız. Demo hesapları kullanabilirsiniz.");if(p.user){const f={id:p.user.uid,name:t.name,email:t.email,role:t.role,department:t.department};r(f)}}else{const{data:p,error:x}=await lt(t.email,t.password);if(x)throw x.message.includes("user-not-found")||x.message.includes("wrong-password")?new Error("Email veya şifre hatalı."):x.message.includes("too-many-requests")?new Error("Çok fazla başarısız deneme. Lütfen daha sonra tekrar deneyin."):new Error("Giriş başarısız. Demo hesapları kullanabilirsiniz.");if(p.user){const f={id:p.user.uid,name:p.user.displayName||p.user.email||"Kullanıcı",email:p.user.email||t.email,role:"staff",department:"Genel"};r(f)}}}catch(p){console.error("Auth error:",p),j(p.message||"İşlem başarısız")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Y,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u?"Kayıt Ol":"Giriş Yap"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"ReportHub Yönetim Sistemi"})]}),c&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4",children:c}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 text-center",children:"🚀 Hızlı Giriş (Önerilen)"}),e.jsxs("button",{onClick:()=>_("admin"),disabled:s,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("span",{children:s?"Giriş yapılıyor...":"Admin Olarak Giriş Yap"})]}),e.jsxs("button",{onClick:()=>_("staff"),disabled:s,className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 px-4 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{children:s?"Giriş yapılıyor...":"Personel Olarak Giriş Yap"})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["veya"," ",e.jsx("span",{className:"text-blue-600 font-medium",children:"manuel giriş"})]})]}),c&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-amber-800",children:c}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'💡 Önerilen: Yukarıdaki "Hızlı Giriş" butonlarını kullanın'})]})]})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:t.email,onChange:o=>a({...t,email:o.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx(Oe,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Şifre"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",value:t.password,onChange:o=>a({...t,password:o.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6}),e.jsx(We,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad Soyad"}),e.jsx("input",{type:"text",value:t.name,onChange:o=>a({...t,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departman"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:t.department,onChange:o=>a({...t,department:o.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx(Ge,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),e.jsxs("select",{value:t.role,onChange:o=>a({...t,role:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"staff",children:"Personel - Veri Girişi"}),e.jsx("option",{value:"admin",children:"Admin - Yönetim"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.role==="admin"?"Tüm verileri görüntüleyebilir ve rapor oluşturabilir":"Sadece veri girişi yapabilir"})]})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:s?"İşlem yapılıyor...":u?"Kayıt Ol":"Giriş Yap"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>v(!u),className:"text-blue-600 hover:text-blue-700 text-sm",children:u?"Zaten hesabınız var mı? Giriş yapın":"Hesabınız yok mu? Kayıt olun"})}),e.jsxs("div",{className:"mt-6 border-t pt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 text-center mb-2",children:"Rol Açıklamaları:"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-3 h-3 text-purple-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Admin:"})," Tüm raporları görür, filtreleyebilir, personel verilerini analiz edebilir"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-3 h-3 text-green-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Personel:"})," Sadece veri girişi yapar, kendi girdiği verileri görür"]})]})]})]})]})})},U=({title:r,value:t,change:a,icon:s,color:i})=>{const c={blue:"from-blue-500 to-blue-600",purple:"from-purple-500 to-purple-600",green:"from-green-500 to-green-600",orange:"from-orange-500 to-orange-600"};return e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${c[i]} flex items-center justify-center`,children:e.jsx(s,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded-full",children:a})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:r}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t})]})},G=({data:r,type:t})=>t==="line"?e.jsx("div",{className:"h-64 flex items-end justify-between px-4",children:r.labels.map((a,s)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 bg-gradient-to-t from-blue-500 to-purple-500 rounded-t-lg mb-2",style:{height:`${r.datasets[0].data[s]/3e4*200}px`}}),e.jsx("span",{className:"text-xs text-gray-600",children:a})]},a))}):t==="pie"?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-48 h-48",children:[e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-green-500"}),e.jsx("div",{className:"absolute inset-4 rounded-full bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"100%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Chart visualization"}),vt=()=>{const{platformData:r,websiteData:t,newsData:a,isConnected:s,lastUpdate:i,error:c}=O(),[j,u]=g.useState(!1),[v,_]=g.useState("overview"),[b,o]=g.useState({dateRange:{start:"",end:""},platforms:[],staff:[],departments:[],dataTypes:["platform","website","news"]}),p=new Date().toLocaleDateString("tr-TR",{month:"long",year:"numeric"}),f=(()=>{const l=r.length+t.length+a.length,m=new Set([...r.map(D=>D.enteredBy),...t.map(D=>D.enteredBy),...a.map(D=>D.enteredBy)]),h=new Date,N=h.getFullYear(),E=h.toLocaleDateString("tr-TR",{month:"long"}),A=[...r.filter(D=>D.year===N&&D.month===E),...t.filter(D=>D.year===N&&D.month===E),...a.filter(D=>D.year===N&&D.month===E)].length,k={};[...r,...t,...a].forEach(D=>{k[D.enteredBy]=(k[D.enteredBy]||0)+1});const se=Object.entries(k).sort(([,D],[,H])=>H-D).slice(0,5).map(([D,H])=>({name:D,entries:H}));return{totalEntries:l,activeStaff:m.size,thisMonthEntries:A,topPerformingStaff:se}})(),w=()=>{let l=r,m=t,h=a;if(b.staff.length>0&&(l=l.filter(N=>b.staff.includes(N.enteredBy)),m=m.filter(N=>b.staff.includes(N.enteredBy)),h=h.filter(N=>b.staff.includes(N.enteredBy))),b.dateRange.start&&b.dateRange.end){const N=new Date(b.dateRange.start),E=new Date(b.dateRange.end);l=l.filter(A=>{const k=new Date(A.enteredAt);return k>=N&&k<=E}),m=m.filter(A=>{const k=new Date(A.enteredAt);return k>=N&&k<=E}),h=h.filter(A=>{const k=new Date(A.enteredAt);return k>=N&&k<=E})}return{filteredPlatform:l,filteredWebsite:m,filteredNews:h}},{filteredPlatform:C,filteredWebsite:P,filteredNews:$}=w(),I=C.reduce((l,m)=>l+m.metrics.followers,0),z=C.reduce((l,m)=>l+m.metrics.engagement,0),y=P.reduce((l,m)=>l+m.visitors,0),S=$.reduce((l,m)=>l+m.mentions,0),d=Array.from(new Set([...r.map(l=>l.enteredBy),...t.map(l=>l.enteredBy),...a.map(l=>l.enteredBy)]));g.useEffect(()=>{u(!1)},[r,t,a]);const R={labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran"],datasets:[{label:"Platform Etkileşimi",data:[12e3,15e3,18e3,22e3,25e3,28e3],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Website Trafiği",data:[8e3,11e3,14e3,17e3,2e4,24e3],borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",tension:.4}]};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{children:p}),e.jsx("span",{className:"text-purple-600 font-medium",children:"• Tüm Veriler"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[s?e.jsx(we,{className:"w-4 h-4"}):e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:s?"live-indicator":"",children:s?"Canlı":"Bağlantı Kesildi"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Son güncelleme: ",i.toLocaleTimeString("tr-TR")]}),j&&e.jsx("div",{className:"spinner h-6 w-6"})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>_("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${v==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Genel Bakış"})]})}),e.jsx("button",{onClick:()=>_("staff"),className:`py-2 px-1 border-b-2 font-medium text-sm ${v==="staff"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Personel Analizi"})]})}),e.jsx("button",{onClick:()=>_("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm ${v==="analytics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Detaylı Analitik"})]})})]})})}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:c})})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Filtreleme"})]}),e.jsx("button",{onClick:()=>o({dateRange:{start:"",end:""},platforms:[],staff:[],departments:[],dataTypes:["platform","website","news"]}),className:"text-sm text-blue-600 hover:text-blue-700",children:"Filtreleri Temizle"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih Aralığı"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:b.dateRange.start,onChange:l=>o(m=>({...m,dateRange:{...m.dateRange,start:l.target.value}})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("input",{type:"date",value:b.dateRange.end,onChange:l=>o(m=>({...m,dateRange:{...m.dateRange,end:l.target.value}})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personel"}),e.jsx("select",{multiple:!0,value:b.staff,onChange:l=>o(m=>({...m,staff:Array.from(l.target.selectedOptions,h=>h.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:d.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Veri Türü"}),e.jsx("div",{className:"space-y-1",children:[{key:"platform",label:"Platform Verileri"},{key:"website",label:"Website Verileri"},{key:"news",label:"Haber Verileri"}].map(({key:l,label:m})=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b.dataTypes.includes(l),onChange:h=>{h.target.checked?o(N=>({...N,dataTypes:[...N.dataTypes,l]})):o(N=>({...N,dataTypes:N.dataTypes.filter(E=>E!==l)}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:m})]},l))})]})]})]}),v==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(U,{title:"Toplam Girdi",value:f.totalEntries.toLocaleString(),change:`+${f.thisMonthEntries} bu ay`,icon:oe,color:"blue"}),e.jsx(U,{title:"Aktif Personel",value:f.activeStaff.toString(),change:"Toplam kayıtlı",icon:He,color:"green"}),e.jsx(U,{title:"Bu Ay Girdi",value:f.thisMonthEntries.toString(),change:`${Math.round(f.thisMonthEntries/f.totalEntries*100)}% toplam`,icon:Ye,color:"purple"}),e.jsx(U,{title:"En Aktif Personel",value:f.topPerformingStaff[0]?.name||"Yok",change:`${f.topPerformingStaff[0]?.entries||0} girdi`,icon:Ze,color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(U,{title:"Toplam Takipçi",value:I.toLocaleString(),change:"+12.5%",icon:K,color:"blue"}),e.jsx(U,{title:"Etkileşim Oranı",value:I>0?`${(z/I*100).toFixed(1)}%`:"0%",change:"+8.2%",icon:Z,color:"purple"}),e.jsx(U,{title:"Website Ziyaretçileri",value:y.toLocaleString(),change:"+15.3%",icon:ke,color:"green"}),e.jsx(U,{title:"Medya Bahsi",value:S.toLocaleString(),change:"+22.1%",icon:Se,color:"orange"})]})]}),v==="staff"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"En Performanslı Personeller"}),e.jsx("div",{className:"space-y-3",children:f.topPerformingStaff.map((l,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold ${m===0?"bg-yellow-500":m===1?"bg-gray-400":m===2?"bg-orange-500":"bg-blue-500"}`,children:m+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.entries," veri girişi"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${l.entries/f.topPerformingStaff[0].entries*100}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Math.round(l.entries/f.totalEntries*100),"%"]})]})]},l.name))})]})}),v==="analytics"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Veri Trend Analizi"}),e.jsx(G,{data:R,type:"line"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Son Aktiviteler"}),e.jsx("div",{className:"space-y-3",children:[...C,...P,...$].sort((l,m)=>new Date(m.enteredAt).getTime()-new Date(l.enteredAt).getTime()).slice(0,10).map((l,m)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[l.enteredBy," - ","platform"in l?"Platform":"visitors"in l?"Website":"Haber"," verisi"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(l.enteredAt).toLocaleDateString("tr-TR")," - ",l.month," ",l.year]})]})]},`${l.id}-${m}`))})]})]})]})},wt=()=>{const{user:r,platformData:t,websiteData:a,newsData:s,isConnected:i,lastUpdate:c,error:j,setCurrentView:u}=O(),[v,_]=g.useState(!1),b=new Date().toLocaleDateString("tr-TR",{month:"long",year:"numeric"}),o=()=>{if(!r)return{myPlatform:[],myWebsite:[],myNews:[]};const y=t.filter(R=>R.enteredBy===r.name),S=a.filter(R=>R.enteredBy===r.name),d=s.filter(R=>R.enteredBy===r.name);return{myPlatform:y,myWebsite:S,myNews:d}},{myPlatform:p,myWebsite:x,myNews:f}=o();g.useEffect(()=>{_(!1)},[t,a,s]);const C=(()=>{const y={};[...p,...x,...f].forEach(d=>{const R=`${d.month} ${d.year}`;y[R]=(y[R]||0)+1});const S=Object.keys(y).sort((d,R)=>{const[l,m]=d.split(" "),[h,N]=R.split(" ");return new Date(`${l} 1, ${m}`).getTime()-new Date(`${h} 1, ${N}`).getTime()});return{labels:S.slice(-6),datasets:[{label:"Aylık Veri Girişlerim",data:S.slice(-6).map(d=>y[d]||0),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4,fill:!0}]}})(),P=p.reduce((y,S)=>y+S.metrics.followers,0),$=p.reduce((y,S)=>y+S.metrics.engagement,0),I=x.reduce((y,S)=>y+S.visitors,0),z=f.reduce((y,S)=>y+S.mentions,0);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Hoş Geldiniz, ",r?.name," 👋"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{children:b}),e.jsx("span",{className:"text-green-600 font-medium",children:"• Kişisel Panel"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm ${i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[i?e.jsx(we,{className:"w-4 h-4"}):e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:i?"live-indicator":"",children:i?"Canlı":"Bağlantı Kesildi"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Son güncelleme: ",c.toLocaleTimeString("tr-TR")]}),v&&e.jsx("div",{className:"spinner h-6 w-6"})]})]})}),j&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(J,{className:"h-5 w-5 text-red-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:j})})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Hızlı Veri Girişi"}),e.jsx("p",{className:"opacity-90",children:"Platform, website veya haber verilerini hızlıca ekleyin"})]}),e.jsxs("button",{onClick:()=>u("entry"),className:"bg-white text-green-600 hover:bg-gray-50 px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"Veri Ekle"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(U,{title:"Takipçi Verilerim",value:P.toLocaleString(),change:`${p.length} platform girişi`,icon:K,color:"blue"}),e.jsx(U,{title:"Etkileşim Verilerim",value:$.toLocaleString(),change:P>0?`%${($/P*100).toFixed(1)} oran`:"Veri yok",icon:Z,color:"purple"}),e.jsx(U,{title:"Website Verilerim",value:I.toLocaleString(),change:`${x.length} website girişi`,icon:ke,color:"green"}),e.jsx(U,{title:"Haber Verilerim",value:z.toLocaleString(),change:`${f.length} haber girişi`,icon:Se,color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aylık Performansım"}),C.labels.length>0?e.jsx(G,{data:C,type:"line"}):e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Henüz veri girişi yapılmamış"}),e.jsx("button",{onClick:()=>u("entry"),className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"İlk verini ekle →"})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Son Girişlerim"}),e.jsxs("div",{className:"space-y-3",children:[[...p,...x,...f].sort((y,S)=>new Date(S.enteredAt).getTime()-new Date(y.enteredAt).getTime()).slice(0,8).map((y,S)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${"platform"in y?"bg-blue-500":"visitors"in y?"bg-green-500":"bg-orange-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["platform"in y?`${y.platform} - Platform`:"visitors"in y?"Website Analytics":"Haber Verileri"," verisi"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(y.enteredAt).toLocaleDateString("tr-TR")," - ",y.month," ",y.year]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:"platform"in y?`${y.metrics.followers.toLocaleString()} takipçi`:"visitors"in y?`${y.visitors.toLocaleString()} ziyaretçi`:`${y.mentions} bahis`})]},`${y.id}-${S}`)),[...p,...x,...f].length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(le,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"mb-2",children:"Henüz veri girişi yapmadınız"}),e.jsx("button",{onClick:()=>u("entry"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"İlk verini ekle →"})]})]})]})]})]})},Nt=()=>{const{user:r,addPlatformData:t,addWebsiteData:a,addNewsData:s,addRPAData:i}=O(),[c,j]=g.useState("platform"),[u,v]=g.useState(!1),[_,b]=g.useState(!1),[o,p]=g.useState({platform:"",followers:"",engagement:"",reach:"",impressions:"",clicks:"",conversions:"",month:new Date().toISOString().slice(0,7)}),[x,f]=g.useState({visitors:"",pageViews:"",bounceRate:"",avgSessionDuration:"",conversions:"",topPages:[""],month:new Date().toISOString().slice(0,7)}),[w,C]=g.useState({mentions:"",sentiment:"neutral",reach:"",topSources:[""],month:new Date().toISOString().slice(0,7)}),[P,$]=g.useState(""),[I,z]=g.useState(""),[y,S]=g.useState(""),[d,R]=g.useState(""),[l,m]=g.useState(""),h=async n=>{n.preventDefault(),v(!0),b(!1);const[T,B]=o.month.split("-");try{await t({platform:o.platform,metrics:{followers:parseInt(o.followers),engagement:parseInt(o.engagement),reach:parseInt(o.reach),impressions:parseInt(o.impressions),clicks:parseInt(o.clicks),conversions:parseInt(o.conversions)},month:new Date(parseInt(T),parseInt(B)-1).toLocaleDateString("tr-TR",{month:"long"}),year:parseInt(T),enteredBy:r?.name||"Demo User"}),p({platform:"",followers:"",engagement:"",reach:"",impressions:"",clicks:"",conversions:"",month:new Date().toISOString().slice(0,7)}),b(!0)}catch{alert("Kayıt başarısız!")}v(!1)},N=async n=>{n.preventDefault(),v(!0),b(!1);const[T,B]=x.month.split("-");try{await a({visitors:parseInt(x.visitors),pageViews:parseInt(x.pageViews),bounceRate:parseFloat(x.bounceRate),avgSessionDuration:parseFloat(x.avgSessionDuration),conversions:parseInt(x.conversions),topPages:x.topPages.filter(M=>M.trim()!==""),month:new Date(parseInt(T),parseInt(B)-1).toLocaleDateString("tr-TR",{month:"long"}),year:parseInt(T),enteredBy:r?.name||"Demo User"}),f({visitors:"",pageViews:"",bounceRate:"",avgSessionDuration:"",conversions:"",topPages:[""],month:new Date().toISOString().slice(0,7)}),b(!0)}catch{alert("Kayıt başarısız!")}v(!1)},E=async n=>{n.preventDefault(),v(!0),b(!1);const[T,B]=w.month.split("-");try{await s({mentions:parseInt(w.mentions),sentiment:w.sentiment,reach:parseInt(w.reach),topSources:w.topSources.filter(M=>M.trim()!==""),month:new Date(parseInt(T),parseInt(B)-1).toLocaleDateString("tr-TR",{month:"long"}),year:parseInt(T),enteredBy:r?.name||"Demo User"}),C({mentions:"",sentiment:"neutral",reach:"",topSources:[""],month:new Date().toISOString().slice(0,7)}),b(!0)}catch{alert("Kayıt başarısız!")}v(!1)},A=async()=>{if(!(!P||!I||!y||!d||!l)){v(!0);try{const[n,T]=new Date().toISOString().slice(0,7).split("-");await i({totalIncomingMails:parseInt(P),totalDistributed:parseInt(I),topRedirectedUnits:{unit1:y,unit2:d,unit3:l},month:new Date(parseInt(n),parseInt(T)-1).toLocaleDateString("tr-TR",{month:"long"}),year:parseInt(n),enteredBy:r?.name||"Unknown User"}),$(""),z(""),S(""),R(""),m(""),b(!0),setTimeout(()=>b(!1),3e3)}catch(n){alert("RPA verisi kaydedilemedi!"),console.error("RPA data submission error:",n)}finally{v(!1)}}},k=()=>{f({...x,topPages:[...x.topPages,""]})},se=n=>{f({...x,topPages:x.topPages.filter((T,B)=>B!==n)})},D=()=>{C({...w,topSources:[...w.topSources,""]})},H=n=>{C({...w,topSources:w.topSources.filter((T,B)=>B!==n)})};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Veri Girişi"}),e.jsx("p",{className:"text-gray-600",children:"Aylık istatistikleri raporlama ve analiz için giriniz"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>j("platform"),className:`py-4 px-1 border-b-2 font-medium text-sm ${c==="platform"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Sosyal Medya Platformları"}),e.jsx("button",{onClick:()=>j("website"),className:`py-4 px-1 border-b-2 font-medium text-sm ${c==="website"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Web Sitesi Analitiği"}),e.jsx("button",{onClick:()=>j("news"),className:`py-4 px-1 border-b-2 font-medium text-sm ${c==="news"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Haber Kapsamı"}),e.jsx("button",{onClick:()=>j("rpa"),className:`py-4 px-1 border-b-2 font-medium text-sm ${c==="rpa"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"RPA Rapor"})]})}),e.jsxs("div",{className:"p-6",children:[c==="platform"&&e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsxs("select",{value:o.platform,onChange:n=>p({...o,platform:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Platform Seçiniz"}),e.jsx("option",{value:"Facebook",children:"Facebook"}),e.jsx("option",{value:"Instagram",children:"Instagram"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"Twitter",children:"Twitter"}),e.jsx("option",{value:"YouTube",children:"YouTube"}),e.jsx("option",{value:"TikTok",children:"TikTok"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ay"}),e.jsx("input",{type:"month",value:o.month,onChange:n=>p({...o,month:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Takipçi"}),e.jsx("input",{type:"number",value:o.followers,onChange:n=>p({...o,followers:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etkileşim"}),e.jsx("input",{type:"number",value:o.engagement,onChange:n=>p({...o,engagement:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Erişim"}),e.jsx("input",{type:"number",value:o.reach,onChange:n=>p({...o,reach:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gösterim"}),e.jsx("input",{type:"number",value:o.impressions,onChange:n=>p({...o,impressions:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tıklama"}),e.jsx("input",{type:"number",value:o.clicks,onChange:n=>p({...o,clicks:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dönüşüm"}),e.jsx("input",{type:"number",value:o.conversions,onChange:n=>p({...o,conversions:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Platform Verisini Kaydet"})]})})]}),c==="website"&&e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ay"}),e.jsx("input",{type:"month",value:x.month,onChange:n=>f({...x,month:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ziyaretçi"}),e.jsx("input",{type:"number",value:x.visitors,onChange:n=>f({...x,visitors:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sayfa Görüntüleme"}),e.jsx("input",{type:"number",value:x.pageViews,onChange:n=>f({...x,pageViews:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hemen Çıkma Oranı (%)"}),e.jsx("input",{type:"number",step:"0.1",value:x.bounceRate,onChange:n=>f({...x,bounceRate:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ortalama Oturum Süresi (dakika)"}),e.jsx("input",{type:"number",step:"0.1",value:x.avgSessionDuration,onChange:n=>f({...x,avgSessionDuration:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dönüşüm"}),e.jsx("input",{type:"number",value:x.conversions,onChange:n=>f({...x,conversions:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"En Popüler Sayfalar"}),e.jsxs("button",{type:"button",onClick:k,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Sayfa Ekle"})]})]}),x.topPages.map((n,T)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:n,onChange:B=>{const M=[...x.topPages];M[T]=B.target.value,f({...x,topPages:M})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Sayfa URL'si veya başlığı"}),x.topPages.length>1&&e.jsx("button",{type:"button",onClick:()=>se(T),className:"p-2 text-red-600 hover:text-red-700",children:e.jsx(ie,{className:"w-4 h-4"})})]},T))]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Web Sitesi Verisini Kaydet"})]})})]}),c==="news"&&e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ay"}),e.jsx("input",{type:"month",value:w.month,onChange:n=>C({...w,month:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duygu Durumu"}),e.jsxs("select",{value:w.sentiment,onChange:n=>C({...w,sentiment:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"positive",children:"Olumlu"}),e.jsx("option",{value:"neutral",children:"Nötr"}),e.jsx("option",{value:"negative",children:"Olumsuz"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bahsedilme Sayısı"}),e.jsx("input",{type:"number",value:w.mentions,onChange:n=>C({...w,mentions:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Erişim"}),e.jsx("input",{type:"number",value:w.reach,onChange:n=>C({...w,reach:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"En Önemli Haber Kaynakları"}),e.jsxs("button",{type:"button",onClick:D,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Kaynak Ekle"})]})]}),w.topSources.map((n,T)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:n,onChange:B=>{const M=[...w.topSources];M[T]=B.target.value,C({...w,topSources:M})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Haber kaynağı adı"}),w.topSources.length>1&&e.jsx("button",{type:"button",onClick:()=>H(T),className:"p-2 text-red-600 hover:text-red-700",children:e.jsx(ie,{className:"w-4 h-4"})})]},T))]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Haber Verisini Kaydet"})]})})]}),c==="rpa"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{children:"RPA Rapor Verisi"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gelen Toplam Mail Sayısı"}),e.jsx("input",{type:"text",value:P,onChange:n=>$(n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dağıtılan Mail Sayısı"}),e.jsx("input",{type:"text",value:I,onChange:n=>z(n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"En Çok Yönlendirme Yapılan Birimler"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Birim"}),e.jsx("input",{type:"text",value:y,onChange:n=>S(n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Birim adı"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"2. Birim"}),e.jsx("input",{type:"text",value:d,onChange:n=>R(n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Birim adı"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. Birim"}),e.jsx("input",{type:"text",value:l,onChange:n=>m(n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Birim adı"})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:A,disabled:u||!P||!I||!y||!d||!l,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:u?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Kaydediliyor..."})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{children:"RPA Raporunu Kaydet"})]})})})]})]})]})]})},kt=()=>{const{user:r,platformData:t,websiteData:a,newsData:s,rpaData:i}=O(),[c,j]=g.useState(""),[u,v]=g.useState("all"),_=()=>r?.role==="admin"?{platformData:t,websiteData:a,newsData:s,rpaData:i}:{platformData:t.filter(d=>d.enteredBy===r?.name),websiteData:a.filter(d=>d.enteredBy===r?.name),newsData:s.filter(d=>d.enteredBy===r?.name),rpaData:i.filter(d=>d.enteredBy===r?.name)},{platformData:b,websiteData:o,newsData:p,rpaData:x}=_(),f=b.filter(d=>!(u!=="all"&&u!=="platform"||c&&`${d.year}-${String(new Date(d.enteredAt).getMonth()+1).padStart(2,"0")}`!==c)),w=o.filter(d=>!(u!=="all"&&u!=="website"||c&&`${d.year}-${String(new Date(d.enteredAt).getMonth()+1).padStart(2,"0")}`!==c)),C=p.filter(d=>!(u!=="all"&&u!=="news"||c&&`${d.year}-${String(new Date(d.enteredAt).getMonth()+1).padStart(2,"0")}`!==c)),P=x.filter(d=>!(u!=="all"&&u!=="rpa"||c&&`${d.year}-${String(new Date(d.enteredAt).getMonth()+1).padStart(2,"0")}`!==c)),$={labels:f.map(d=>`${d.platform} (${d.month})`),datasets:[{label:"Takipçi Sayısı",data:f.map(d=>d.metrics.followers),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},I=[...new Set(f.map(d=>d.platform))],z={labels:I,datasets:[{data:I.map(d=>f.filter(R=>R.platform===d).reduce((R,l)=>R+l.metrics.followers,0)),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(147, 51, 234, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(34, 197, 94, 0.8)"],borderWidth:0}]},y={labels:w.map(d=>`${d.month} ${d.year}`),datasets:[{label:"Ziyaretçi Sayısı",data:w.map(d=>d.visitors),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0}]},S={labels:P.map(d=>`${d.month} ${d.year}`),datasets:[{label:"Gelen Mail",data:P.map(d=>d.totalIncomingMails),borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0},{label:"Dağıtılan Mail",data:P.map(d=>d.totalDistributed),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r?.role==="admin"?"Grafik Raporlar":"Raporlarım"}),e.jsx("p",{className:"text-gray-600",children:r?.role==="admin"?"Tüm verilerden grafik raporları":"Kendi verilerinizden grafik raporları"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtreler"}),e.jsx(Ne,{className:"w-5 h-5 text-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rapor Türü"}),e.jsxs("select",{value:u,onChange:d=>v(d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Tüm Veriler"}),e.jsx("option",{value:"platform",children:"Sosyal Medya"}),e.jsx("option",{value:"website",children:"Web Sitesi"}),e.jsx("option",{value:"news",children:"Haber Kapsamı"}),e.jsx("option",{value:"rpa",children:"RPA Rapor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ay Seçimi"}),e.jsx("input",{type:"month",value:c,onChange:d=>j(d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(u==="all"||u==="platform")&&f.length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Takipçi Eğilimi"}),e.jsx(Z,{className:"w-5 h-5 text-blue-500"})]}),e.jsx(G,{data:$,type:"line"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Dağılımı"}),e.jsx(ne,{className:"w-5 h-5 text-purple-500"})]}),e.jsx(G,{data:z,type:"pie"})]})]}),(u==="all"||u==="website")&&w.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Website Ziyaretçi Eğilimi"}),e.jsx(Z,{className:"w-5 h-5 text-green-500"})]}),e.jsx(G,{data:y,type:"line"})]}),(u==="all"||u==="rpa")&&P.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"RPA Mail İstatistikleri"}),e.jsx(ne,{className:"w-5 h-5 text-orange-500"})]}),e.jsx(G,{data:S,type:"line"})]}),(u==="platform"&&f.length===0||u==="website"&&w.length===0||u==="news"&&C.length===0||u==="rpa"&&P.length===0||u==="all"&&f.length===0&&w.length===0&&C.length===0&&P.length===0)&&e.jsx("div",{className:"bg-white p-12 rounded-xl shadow-sm border border-gray-100 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(ne,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Gösterilecek veri bulunamadı"}),e.jsx("p",{children:"Seçilen filtreler için henüz veri girişi yapılmamış."})]})})]})},St=({notifications:r,onRemove:t})=>{const a=i=>{switch(i){case"success":return e.jsx(De,{className:"w-5 h-5 text-green-500"});case"info":return e.jsx(de,{className:"w-5 h-5 text-blue-500"});case"warning":return e.jsx(ye,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx(Je,{className:"w-5 h-5 text-red-500"});default:return e.jsx(de,{className:"w-5 h-5 text-blue-500"})}},s=i=>{switch(i){case"success":return"bg-green-50 border-green-200";case"info":return"bg-blue-50 border-blue-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}};return r.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(i=>e.jsx("div",{className:`max-w-sm w-full ${s(i.type)} border rounded-lg shadow-lg p-4 animate-slide-in`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:a(i.type)}),e.jsxs("div",{className:"ml-3 w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.timestamp.toLocaleTimeString("tr-TR")})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:()=>t(i.id),children:[e.jsx("span",{className:"sr-only",children:"Kapat"}),e.jsx(ie,{className:"h-4 w-4"})]})})]})},i.id))})},Dt=()=>{const{platformData:r,websiteData:t,newsData:a,isConnected:s}=O(),[i,c]=g.useState([]),[j,u]=g.useState({platform:0,website:0,news:0});g.useEffect(()=>{const b={platform:r.length,website:t.length,news:a.length};b.platform>j.platform&&v({id:Date.now().toString(),message:"Yeni platform verisi eklendi",type:"success",timestamp:new Date}),b.website>j.website&&v({id:Date.now().toString()+"_web",message:"Yeni website verisi eklendi",type:"success",timestamp:new Date}),b.news>j.news&&v({id:Date.now().toString()+"_news",message:"Yeni haber verisi eklendi",type:"success",timestamp:new Date}),u(b)},[r.length,t.length,a.length]),g.useEffect(()=>{s?(c(b=>b.filter(o=>o.id!=="connection_lost")),v({id:"connection_restored",message:"Bağlantı yeniden kuruldu",type:"success",timestamp:new Date})):v({id:"connection_lost",message:"Bağlantı kesildi - Veriler güncel olmayabilir",type:"error",timestamp:new Date})},[s]);const v=b=>{c(o=>[b,...o.slice(0,4)]),setTimeout(()=>{_(b.id)},5e3)},_=b=>{c(o=>o.filter(p=>p.id!==b))};return{notifications:i,addNotification:v,removeNotification:_}},Ct=()=>{const{user:r,currentView:t}=O(),{notifications:a,removeNotification:s}=Dt();if(!r)return e.jsx(jt,{});const i=()=>r.role==="admin"?e.jsx(vt,{}):e.jsx(wt,{});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(yt,{}),e.jsxs("main",{children:[t==="dashboard"&&i(),t==="entry"&&e.jsx(Nt,{}),t==="reports"&&e.jsx(kt,{})]}),e.jsx(St,{notifications:a,onRemove:s})]})};function At(){return e.jsx(ht,{children:e.jsx(pt,{children:e.jsx(Ct,{})})})}Pe(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(At,{})}));
